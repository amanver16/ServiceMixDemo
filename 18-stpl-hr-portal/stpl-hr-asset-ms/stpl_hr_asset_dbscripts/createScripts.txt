CREATE TABLE THR_ASSET_AGGREGATE (
    AGGREGATE_ID varchar(255) ,
    AGGREGATE_TYPE varchar(255),
    CREATED_DATE DATETIME default getdate(),
    PRIMARY KEY (AGGREGATE_ID)
);

CREATE TABLE THR_ASSET_AGGREGATE_EVENT  (
	SYSTEM_ID int IDENTITY (1,1),
    AGGREGATE_ID varchar(255) ,
    EVENT_DATA nvarchar(MAX),
    EVENT_NAME varchar(255),
    VERSION varchar(255),
    CREATED_DATE DATETIME default getdate(),
    PRIMARY KEY (SYSTEM_ID),
    CONSTRAINT fk_THR_ASSET_AGGREGATE_EVENT_THR_ASSET_AGGREGATE_AGGREGATE_ID FOREIGN KEY(AGGREGATE_ID) references THR_ASSET_AGGREGATE
(AGGREGATE_ID)
);




CREATE TABLE THR_ASSET_QUERY_ALLOCATION (
	SYSTEM_ID int IDENTITY (1,1),
	ASSET_ID varchar(255),
    AGGREGATE_ID varchar(255) ,
    ASSET_TYPE varchar(50),
    SPECIFICATION nvarchar(MAX),
    ALLOCATION_STATUS varchar(50),
    ALLOCATED_TO varchar(255),
    START_DATE DATETIME,
    END_DATE DATETIME,
        
    PRIMARY KEY (SYSTEM_ID)
);


